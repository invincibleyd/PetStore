<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Owner Registration - PetStore</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gray-100 text-gray-800">

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">üêæ PetStore</a>
      <div>
        <a href="#" onclick="goHome()" class="btn btn-light btn-sm">Home</a>

      </div>
    </div>
  </nav>

  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Owner Registration</h4>
          </div>
          <div class="card-body">
            <form id="ownerRegistrationForm">
              <div class="mb-3">
                <label for="ownerName" class="form-label">Owner Name *</label>
                <input type="text" class="form-control" id="ownerName" required>
                <div class="invalid-feedback">
                  Please provide a valid owner name.
                </div>
              </div>

              <div class="d-grid">
                <button type="submit" class="btn btn-primary" id="registerBtn">
                  Register as Owner
                </button>
              </div>
            </form>

            <div id="message" class="mt-3" style="display: none;"></div>
          </div>
        </div>

        <div class="text-center mt-3">
          <a href="pages/owners.html" class="btn btn-outline-primary">View All Owners</a>
        </div>
      </div>
    </div>
  </div>

  <script src="js/api.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('ownerRegistrationForm');
      const messageDiv = document.getElementById('message');
      const registerBtn = document.getElementById('registerBtn');

      const showMessage = (message, isSuccess) => {
        messageDiv.className = `alert ${isSuccess ? 'alert-success' : 'alert-danger'}`;
        messageDiv.textContent = message;
        messageDiv.style.display = 'block';
        setTimeout(() => {
          messageDiv.style.display = 'none';
        }, 5000);
      };

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const ownerName = document.getElementById('ownerName').value.trim();

        if (!ownerName) {
          showMessage('Please enter an owner name.', false);
          return;
        }

        registerBtn.disabled = true;
        registerBtn.textContent = 'Registering...';

        try {
          const response = await fetch('/api/owners/register', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              name: ownerName,
              active: true
            })
          });

          const result = await response.json();

          if (result.success) {
            showMessage('Owner registered successfully!', true);
            form.reset();
            // Optionally redirect to owners list
            setTimeout(() => {
              window.location.href = 'pages/owners.html';
            }, 2000);
          } else {
            showMessage(result.message || 'Registration failed.', false);
          }
        } catch (error) {
          console.error('Registration error:', error);
          showMessage('An error occurred during registration.', false);
        } finally {
          registerBtn.disabled = false;
          registerBtn.textContent = 'Register as Owner';
        }
      });
    });
  </script>
</body>
</html>
